<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscaminas - Selecci√≥n de nivel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body { background: var(--bg-main); color: var(--text-main); }
        h1, h2 { color: var(--text-secondary); }
        table { background: var(--bg-table); color: var(--text-main); border-radius: 8px; }
        th, td { color: var(--text-main); }
        button { background: var(--button-bg); color: var(--button-text); border-radius: 7px; border: none; padding: 8px 24px; margin: 8px; font-size: 1.1em; cursor: pointer; }
        button:hover { background: var(--button-hover); color: #bfa76a; }
        #toggle-dark { margin-bottom:10px; float:right; position:absolute; right:20px; top:20px; }
    </style>
</head>
<body>
    <button id="toggle-dark">üåô Modo oscuro</button>
    <button id="btn-tutorial" style="margin-top:10px;">¬øC√≥mo jugar?</button>
    <h1>üß® Buscaminas üß®</h1>
    <h2>Selecciona un nivel</h2>
    <form action="/jugar" method="post">
        <button type="submit" name="nivel" value="facil">F√°cil (8x8, 10 minas)</button>
        <button type="submit" name="nivel" value="medio">Medio (16x16, 40 minas)</button>
        <button type="submit" name="nivel" value="dificil">Dif√≠cil (16x30, 99 minas)</button>
    </form>
    <h2>Personalizado</h2>
    <form action="/jugar" method="post">
        <label>Filas: <input type="number" name="filas" min="5" max="30" value="10" required></label><br>
        <label>Columnas: <input type="number" name="columnas" min="5" max="30" value="10" required></label><br>
        <label>Minas: <input type="number" name="minas" min="1" max="200" value="10" required></label><br>
        <button type="submit" name="nivel" value="personalizado">Jugar personalizado</button>
    </form>
    {% if records %}
    <h2>R√©cords de partidas ganadas</h2>
    <table style="margin: 0 auto; background: #203057; color: white; border-radius: 8px;">
        <tr><th style="padding: 6px 16px;">Nivel</th><th style="padding: 6px 16px;">Ganadas</th></tr>
        {% for nivel, ganadas in records.items() %}
        <tr><td style="padding: 6px 16px;">{{ nivel }}</td><td style="padding: 6px 16px;">{{ ganadas }}</td></tr>
        {% endfor %}
    </table>
    {% endif %}
    <script>
        // Modo oscuro/claro universal
        const btnDark = document.getElementById("toggle-dark");
        function aplicarModoOscuro() {
            document.body.classList.add("dark-mode");
            btnDark.textContent = "‚òÄÔ∏è Modo claro";
        }
        function aplicarModoClaro() {
            document.body.classList.remove("dark-mode");
            btnDark.textContent = "üåô Modo oscuro";
        }
        if (localStorage.getItem("modoOscuro") === "1") {
            aplicarModoOscuro();
        } else {
            aplicarModoClaro();
        }
        btnDark.onclick = function() {
            if (document.body.classList.contains("dark-mode")) {
                aplicarModoClaro();
                localStorage.setItem("modoOscuro", "0");
            } else {
                aplicarModoOscuro();
                localStorage.setItem("modoOscuro", "1");
            }
        };
        document.getElementById("btn-tutorial").onclick = function() {
            window.location.href = "/tutorial";
        };
    </script>
</body>
</html>
